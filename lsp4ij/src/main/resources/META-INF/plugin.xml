<idea-plugin>
    <id>org.eclipse.lsp4ij</id>
    <name>org.eclipse.lsp4ij</name>

    <vendor url="https://eclipse.org/">Eclipse</vendor>

    <category>Framework Integration</category>

    <description><![CDATA[
        Framework for language server
        ]]></description>

<!--    <depends>com.intellij.modules.platform</depends>-->
<!--    <depends>org.jetbrains.plugins.terminal</depends>-->
<!--    <depends>com.intellij.modules.lang</depends>-->
<!--    <depends>com.intellij.modules.java</depends>-->
<!--    <depends>com.intellij.properties</depends>-->
<!--    <depends>org.jetbrains.idea.maven</depends>-->
<!--    <depends>com.intellij.gradle</depends>-->
    <idea-version since-build="222"/>

    <extensionPoints>
        <extensionPoint name="server"
                        beanClass="org.eclipse.lsp4ij.ServerExtensionPointBean"/>
        <extensionPoint name="languageMapping"
                        beanClass="org.eclipse.lsp4ij.LanguageMappingExtensionPointBean"/>
        <extensionPoint name="serverIconProvider" beanClass="org.eclipse.lsp4ij.ServerIconProviderExtensionPointBean"/>
    </extensionPoints>
    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceImplementation="org.eclipse.lsp4ij.lifecycle.LanguageServerLifecycleManager"/>
        <projectService serviceImplementation="org.eclipse.lsp4ij.lifecycle.LanguageServerLifecycleManager"/>

        <!-- Completion support for all language servers -->
        <completion.contributor id="LSPCompletionContributor" language="any"
                                implementationClass="org.eclipse.lsp4ij.operations.completion.LSPCompletionContributor"
                                order="first"/>

        <!-- Diagnostic support for all language servers -->
        <inspectionToolProvider
                implementation="org.eclipse.lsp4ij.operations.diagnostics.LSPInspectionToolProvider"/>
        <projectService serviceImplementation="org.eclipse.lsp4ij.LanguageServiceAccessor"/>
        <!-- TODO re-enable goto handler -->
        <!-- <gotoDeclarationHandler
                implementation="org.eclipse.lsp4ij.operations.navigation.LSPGotoDeclarationHandler"/> -->

        <!-- Hover for LemMinX + Liberty LemMinX ext -->
        <lang.documentationProvider id="LSPTextHoverXML" language="XML"
                                    implementationClass="org.eclipse.lsp4ij.operations.hover.LSPTextHover"
                                    order="first"/>
        <!-- Hover for Liberty Config LS bootstrap.properties and LSP4MP microprofile-config.properties -->
        <lang.documentationProvider id="LSPTextHoverProperties" language="Properties"
                                    implementationClass="org.eclipse.lsp4ij.operations.hover.LSPTextHover"
                                    order="first"/>
        <!-- Hover for Java files, LSP4MP and LSP4Jakarta -->
        <lang.documentationProvider id="LSPTextHoverJAVA" language="JAVA"
                                    implementationClass="org.eclipse.lsp4ij.operations.hover.LSPTextHover"
                                    order="first"/>
        <codeInsight.inlayProvider language="JAVA"
                                   implementationClass="org.eclipse.lsp4ij.operations.codelens.LSPCodelensInlayProvider"/>
        <externalAnnotator language="XML" implementationClass="org.eclipse.lsp4ij.operations.diagnostics.LSPDiagnosticAnnotator"/>
        <externalAnnotator language="TEXT" implementationClass="org.eclipse.lsp4ij.operations.diagnostics.LSPDiagnosticAnnotator"/>
        <externalAnnotator language="Properties" implementationClass="org.eclipse.lsp4ij.operations.diagnostics.LSPDiagnosticAnnotator"/>
        <externalAnnotator language="JAVA" implementationClass="org.eclipse.lsp4ij.operations.diagnostics.LSPDiagnosticAnnotator"/>
    </extensions>

    <project-components>
        <component>
            <implementation-class>org.eclipse.lsp4ij.ConnectDocumentToLanguageServerSetupParticipant</implementation-class>
        </component>
    </project-components>

    <!-- LSP consoles -->
    <extensions defaultExtensionNs="com.intellij">
        <applicationConfigurable groupId="language"
                                 id="LanguageServers"
                                 bundle="messages.LanguageServerBundle"
                                 key="language.servers"
                                 provider="org.eclipse.lsp4ij.settings.LanguageServerListConfigurableProvider"/>
        <applicationService id="org.eclipse.lsp4ij.settings.UserDefinedLanguageServerSettings"
                            serviceImplementation="org.eclipse.lsp4ij.settings.UserDefinedLanguageServerSettings"/>
        <toolWindow id="Language Servers"
                    anchor="bottom"
                    factoryClass="org.eclipse.lsp4ij.console.LSPConsoleToolWindowFactory"
                    canCloseContents="false"
                    icon="AllIcons.Webreferences.Server"/>
    </extensions>
</idea-plugin>